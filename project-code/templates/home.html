<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <title>Spam Email Checker</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <style>
        h1,p {
            background: white;
            text-align: center;
        }


        div {
            /*align-content: center;*/
            text-align: center;
        }

        button {
            border-radius: 3px;
        }

        .upload {
            padding: 0px 0px 0px 165px;
        }


        .hide {
            display: none;
        }

        img {
            display: block;
            margin-left: auto;
            margin-right: auto;
            width: 30%;
        }
        
    </style>
    <link rel="stylesheet" href="/static/css/home.css">
</head>
<body>
    <img src="https://www.playersguildofdearborn.org/wp-content/uploads/2012/03/Spamalot_glow.png"></img>
    <p style="font-size: 75%"><i>This image is taken from https://www.playersguildofdearborn.org/about-us/past-show/spamalot/</i></p>
    <h1>Spam Email Checker</h1>
    <p>This tool determines whether or not your email is considered spam. 
        To check, upload a raw text file (with extension .txt) of the 
        body of the email and click upload.</p>
    <p>NOTE: This tool will only except one txt file</p>
    <div>
        <form id="upload-form" action="{{ url_for('..py_scripts_gatherData_upload') }}" method="POST" enctype="multipart/form-data">
            <strong>File:</strong><br>
            <input id="file-picker" type="file" name="file" class="upload" accept="text/*" single>
            <div id="msg"></div>
            </br>
            <input type="submit" value="Upload!" id="upload-button">
        </form>
    </div>
</body>
<!--<script src="/static/js/home.js"></script>-->
<script>
    window.onload = disable;
    function disable() {
        document.getElementById("upload-button").disabled = true;
    }
    $("#file-picker").change(function(){
        var input = document.getElementById('file-picker');
        for (var i=0; i<input.files.length; i++)
        {
            var ext= input.files[i].name.substring(input.files[i].name.lastIndexOf('.')+1).toLowerCase()
            if ((ext == 'txt'))
            {
                $("#msg").text("File is supported")
                document.getElementById("upload-button").disabled = false;
                
            }
            else
            {
                $("#msg").text("File is NOT supported. Choose a different file.")
                document.getElementById("file-picker").value ="";
                document.getElementById("upload-button").disabled = true;
            }
        }
    } );
</script>
</html>
